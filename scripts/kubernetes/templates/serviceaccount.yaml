{{- if .Values.rbac.enable }}
# service account for gitlab in the namespace
# kubectl get serviceaccounts/gitlab -o yaml
# will show details for connecting to gitlab server
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: polkadot
    chart: {{ .Chart.Name }}-{{ .Chart.Version }}
    release: {{ .Release.Name }}
  name: {{ .Values.rbac.name }}
# ---
# kind: Role
# apiVersion: rbac.authorization.k8s.io/v1
# metadata:
#   name: polkarole
#   labels:
#     app: polkadot
#     chart: {{ .Chart.Name }}-{{ .Chart.Version }}
#     release: {{ .Release.Name }}
# rules:
# - apiGroups:
#   - "" # "" indicates the core API group
#   resources:
#   - "services"
#   - "namespaces"
#   - "endpoints"
#   verbs:
#   - "get"
# ---
# kind: RoleBinding
# apiVersion: rbac.authorization.k8s.io/v1
# metadata:
#   name: polkadot
#   namespace: polkadot
# subjects:
# - kind: ServiceAccount
#   name: polkadot
#   namespace: polkadot
# roleRef:
#   kind: Role
#   name: polkarole
#   apiGroup: ""
{{- end }}
